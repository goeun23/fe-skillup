# Next의 pre-rendering

사전렌더링 : 브라우저의 요청에 서버 측에서 렌더링이 완료된 HTML을 응답해주는 렌더링 방식을 말한다. 이는 기존의 react 앱이 따르고 있던 Client-Side-Rendering 방식의 단점을 아주 효율적으로 해결하는 기술이다.

초기 페이지 로딩 시 사용자에게 완성된 화면을 바로 보여줄 수 있어 성능과 SEO에 뛰어난 이점을 제공한다.

## Next.js의 Pre-rendering의 두 가지 방식

### Static Generation(정적생성)

- 빌드시 HTML을 생성한다.
- 생성된 HTML은 모든 사용자 요청에 재사용된다.
- 블로그나 마케팅 페이지 등 변경이 잦지 않은 콘텐츠에 적합하다.

### Server-side Rendering

- 사용자 요청 시마다 HTML을 생성한다.
- 매번 새로운 데이터를 받아 최신 내용을 반영할 수 있다.
- 실시간 데이터, 잦은 업데이트, 사용자 맞춤 정보 등에 적합하다.
- 실시간 뉴스 피드, 로그인 사용자별 대시보드 등

Next.js의 각 페이지 파일에서 원하는 방식을 페이지별로 개별적으로 선택할 수 있다. 두 가지 방식을 혼합해서 사용하는 것도 가능하다.

미리 생성된 HTML이 브라우저에서 로드된 후, Javascript가 실행되어 동적 기능 및 상호작용이 가능해지는 과정을 Hydration이라고 한다.

> 정리하면, Pre-rendering은 모든 Next.js 페이지의 기본 동작이며, 사용 목적과 데이터 변경 주기에 따라 적합한 방식을 선택하면 된다.

### Static Generation(SSG) / Server-side Rendering(SSR) 차이점

Static Generation은 빌드 시점에 콘텐츠를 미리 렌더링해 파일로 만들어놓고, 사용자가 접근하면 해당 파일을 곧바로 제공한다. 그래서 응답 속도가 매우 빠르고, 서버 부하가 적으며 SEO에도 유리하다. 단점은 데이터가 자주 변경되는 페이지에는 적합하지 않다.

Server-side Rendering은 사용자의 매 요청마다 서버에서 HTML을 실시간으로 새로 만들어 응답한다. 항상 최신 데이터를 반영할 수 있지만, 매 요청마다 서버 연산이 필요해 응답속도가 느리고 서버 부하가 높을 수 있다. 빠른 실시간 데이터 반영이나 개인화가 중요한 경우에 주로 사용된다.
