# Server Component, Client Component

기본적으로, 레이아웃과 페이지는 데이터를 fetch 하고, 데이터를 캐싱하여 UI에 반영하는 Server Component이다. 상호작용이나 browser API를 사용하려면, 부분적으로 Client Component를 사용할 수 있다.

React에서 컴포넌트는 서버 컴포넌트와 클라이언트 컴포넌트로 나뉘며, 주로 Next.js 13 이상 app directory 에서 사용된다.

---

## React의 Server Component

기본값 : 별도 지시 없으면 서버에서 렌더링됨 (”use client”가 없는 컴포넌트)

브라우저에 포함되지 않음 : JS 번들에 포함되지 않아서 클라이언트로 전송되지 않음

사용예시 : DB 호출, 파일 시스템 접근 등 보안, 무거운 연산에 적합

상태나 이벤트 핸들러 사용 불가 : useState, useEffect, onClick 등 클라이언트 전용 기능 사용 불가

---

## Client Component

명시 필요 : 최상단에 ‘use client’ 선언 필수

브라우저에서 실행 : js 번들에 포함되어 전송됨

인터랙션 가능 : useState, useEffect, 이벤트 핸들링 가능

사용예시 : 버튼 클릭, 입력 폼, 모달 등 사용자 인터렉션 UI

# Next.js 에서 차이

## 사용방식

### Server Component

- app/ 하위의 페이지나 레이아웃 파일은 기본적으로 서버 컴포넌트 입니다. 별다른 설정 없이 사용 가능하다.
- 서버에서 HTML을 렌더링해서 클라이언트로 전송한다.
- 브라우저는 이미 완성된 HTML을 바로 표시한다.
- JS로 재사용되지 않는다.

### Client Component

- 꼭 상단에 “use client”를 선언해야한다.
- useState, onClick, useEffect등 클라이언트 전용 기능을 쓰고 싶을 때 사용한다.
- JS 번들에 포함되어 브라우저로 전송된다.
- 초기에는 HTML 스켈레톤만 오고, 이후 React가 클라이언트에서 Hydration 수행한다.
- Hydration 이후 상태/ 이벤트 작동 시작

## 명시적으로 컴포넌트를 나누는 이유

성능 최적화와 번들 크기 최소화 때문

→ 렌더링 비용과 번들 크기를 줄이는 최적화 전략

### 1. JS 번들 크기 줄이기

- 서버컴포넌트는 브라우저에 js를 보내지 않음 → 더 빠른 로딩, 불필요한 코드 없음
- 클라이언트 컴포넌트만 js로 번들됨 → 명확한 분리로 최적화 가능

### 2. 서버 전용 연산 처리 가능

- DB 조회, 파일 시스템 접근 등 브라우저에서 불가능한 작업은 서버에서 처리
- 서버 컴포넌트에서 처리하면 클라이언트까지 데이터 전달만 하면 됨 → 보안상 유리함

### 3. 의도를 명확히 하기 위해

- “use client” 명시 → 이 컴포넌트는 상태, 이벤트 등 클라이언트 기능을 사용함
- 구분 없으면 서버/클라이언트 혼재되어 번들 크기 증가, 성능 저하 발생
